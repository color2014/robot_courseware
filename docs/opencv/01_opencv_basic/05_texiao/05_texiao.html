



<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="传智专修学院 人工智能和机器人实验室 正则表达式">
      
      
        <link rel="canonical" href="https://www.czxy.com/docs/01_opencv_basic/05_texiao/">
      
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="jp">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>图像特效 - 黑马机器人—OpenCV机器视觉：让机器看见世界！</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.adb8469c.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#_1" tabindex="0" class="md-skip">
        跳转至
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <!-- <a href="https://www.czxy.com/docs" title="黑马机器人—OpenCV机器视觉：让机器看见世界！" aria-label="黑马机器人—OpenCV机器视觉：让机器看见世界！" class="md-header-nav__button md-logo"> -->
        <a href="/" title="黑马机器人—OpenCV机器视觉：让机器看见世界！" aria-label="黑马机器人—OpenCV机器视觉：让机器看见世界！" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              <a href="https://www.czxy.com/docs">黑马机器人—OpenCV机器视觉：让机器看见世界！</a>
            </span>
            <span class="md-header-nav__topic">
              
                图像特效
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer" style="display: none;">
    <a href="https://www.czxy.com/docs" title="黑马机器人—OpenCV机器视觉：让机器看见世界！" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    黑马机器人—OpenCV机器视觉：让机器看见世界！
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      01_OpenCV基础
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        01_OpenCV基础
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="概述" class="md-nav__link">
      概述
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../01_challenge/" title="面临的挑战" class="md-nav__link">
      面临的挑战
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../02_install/" title="OpenCV安装" class="md-nav__link">
      OpenCV安装
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../03_quickstart/" title="入门案例" class="md-nav__link">
      入门案例
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04_jihebianhuan/" title="图片的几何变换" class="md-nav__link">
      图片的几何变换
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        图像特效
      </label>
    
    <a href="./" title="图像特效" class="md-nav__link md-nav__link--active">
      图像特效
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    图像融合
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    灰度处理
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    原理演示
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    颜色反转
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    灰图反转
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    彩图反转
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    马赛克效果
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    毛玻璃效果
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    图片浮雕效果
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    梯度
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    绘制图形
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    文字图片绘制
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../06_meihua/" title="图片美化" class="md-nav__link">
      图片美化
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../07_shipin/" title="视频处理" class="md-nav__link">
      视频处理
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      02_OpenCV高级
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        02_OpenCV高级
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../02_opencv_advance1/" title="学习目标" class="md-nav__link">
      学习目标
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../02_opencv_advance1/01_facedeteaction/" title="人脸识别" class="md-nav__link">
      人脸识别
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../02_opencv_advance1/02_hsv/" title="HSV颜色模型" class="md-nav__link">
      HSV颜色模型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../02_opencv_advance1/03_inrange/" title="颜色过滤" class="md-nav__link">
      颜色过滤
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../02_opencv_advance1/04_binary/" title="图像的二值化" class="md-nav__link">
      图像的二值化
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../02_opencv_advance1/05_noise/" title="图像的噪声" class="md-nav__link">
      图像的噪声
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      03_OpenCV进阶
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        03_OpenCV进阶
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../03_opencv_advance2/" title="学习目标" class="md-nav__link">
      学习目标
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../03_opencv_advance2/01_hist_match/" title="直方图匹配" class="md-nav__link">
      直方图匹配
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../03_opencv_advance2/02_juanji/" title="图片卷积" class="md-nav__link">
      图片卷积
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../03_opencv_advance2/03_hough/" title="霍夫变换" class="md-nav__link">
      霍夫变换
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../03_opencv_advance2/04_contours/" title="边缘与轮廓" class="md-nav__link">
      边缘与轮廓
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../03_opencv_advance2/04_xingtai/" title="形态学变换" class="md-nav__link">
      形态学变换
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../03_opencv_advance2/04_match/" title="模板匹配" class="md-nav__link">
      模板匹配
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../03_opencv_advance2/07_road_line/" title="案例:提取车道线" class="md-nav__link">
      案例:提取车道线
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../03_opencv_advance2/05_bs/" title="案例:背景消除" class="md-nav__link">
      案例:背景消除
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../03_opencv_advance2/06_birds/" title="案例:flappybird" class="md-nav__link">
      案例:flappybird
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      04_CPP版OpenCV
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        04_CPP版OpenCV
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/" title="学习目标" class="md-nav__link">
      学习目标
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/01_install/" title="配置cpp环境" class="md-nav__link">
      配置cpp环境
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/02_quickstart/" title="Mat类" class="md-nav__link">
      Mat类
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/03_histogram/" title="直方图" class="md-nav__link">
      直方图
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/04_match/" title="模板匹配" class="md-nav__link">
      模板匹配
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/06_juanji/" title="图像的卷积" class="md-nav__link">
      图像的卷积
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/07_xingtai/" title="形态学变换" class="md-nav__link">
      形态学变换
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/08_perspective/" title="透视变换" class="md-nav__link">
      透视变换
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/09_hough/" title="霍夫圆" class="md-nav__link">
      霍夫圆
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/10_contours/" title="轮廓提取" class="md-nav__link">
      轮廓提取
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/11_lianxi/" title="CPP操作小案例" class="md-nav__link">
      CPP操作小案例
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/12_floodfill/" title="泛洪填充/漫水填充" class="md-nav__link">
      泛洪填充/漫水填充
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/13_watershed/" title="图像分水岭" class="md-nav__link">
      图像分水岭
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/14_distancechange/" title="距离变换" class="md-nav__link">
      距离变换
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/15_example_inpaint/" title="0. 图片修复" class="md-nav__link">
      0. 图片修复
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/16_example_qiebian/" title="1. 切边" class="md-nav__link">
      1. 切边
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/17_example_qiebian2/" title="2. 切边+旋转" class="md-nav__link">
      2. 切边+旋转
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/18_example_linedetect/" title="3. 直线检测" class="md-nav__link">
      3. 直线检测
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/19_example_count/" title="4. 图像计数" class="md-nav__link">
      4. 图像计数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/20_example_segement/" title="5. 图像分割" class="md-nav__link">
      5.  图像分割
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../04_cpp_opencv/21_example_changebg/" title="6. 证件照换背景" class="md-nav__link">
      6. 证件照换背景
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    图像融合
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    灰度处理
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    原理演示
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    颜色反转
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    灰图反转
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    彩图反转
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    马赛克效果
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    毛玻璃效果
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    图片浮雕效果
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    梯度
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    绘制图形
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    文字图片绘制
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="_1">图像特效<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<h2 id="_2">图像融合<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>图像融合,即按照一定的比例将两张图片融合在一起!例如下面图一图二经过融合之后形成图三!</p>
<p>执行这样的融合需要用到opencv提供的如下api</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="n">cv</span><span class="o">.</span><span class="n">addWeighted</span><span class="p">(</span><span class="n">图像1</span><span class="p">,</span><span class="n">权重1</span><span class="p">,</span><span class="n">图像2</span><span class="p">,</span><span class="n">权重2</span><span class="p">,</span><span class="n">叠加之后的像素偏移值</span><span class="p">)</span>
<span class="n">注意</span><span class="p">:</span>
    <span class="n">进行叠加的两张图片宽高应该相同</span>
    <span class="n">叠加之后的像素偏移值如果填的话不要填太大</span><span class="p">,</span><span class="n">超过255会导致图像偏白</span>
</code></pre></div>
</td></tr></table>

<p><img alt="" src="../../img/addweighted.jpg" /></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">cv2</span> <span class="k">as</span> <span class="nn">cv</span>

<span class="n">itheima</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&quot;img/itheima.jpg&quot;</span><span class="p">,</span> <span class="n">cv</span><span class="o">.</span><span class="n">IMREAD_COLOR</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&quot;itheima&quot;</span><span class="p">,</span><span class="n">itheima</span><span class="p">)</span>

<span class="n">tony</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&quot;img/tony.jpg&quot;</span><span class="p">,</span> <span class="n">cv</span><span class="o">.</span><span class="n">IMREAD_COLOR</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&quot;tony&quot;</span><span class="p">,</span><span class="n">tony</span><span class="p">)</span>

<span class="c1"># 进行叠加时的插值</span>
<span class="n">dst</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">addWeighted</span><span class="p">(</span><span class="n">itheima</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="n">tony</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&quot;dst&quot;</span><span class="p">,</span><span class="n">dst</span><span class="p">)</span>

<span class="n">cv</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span>
</code></pre></div>
</td></tr></table>

<h2 id="_3">灰度处理<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h2>
<p>一张彩色图片通常是由BGR三个通道叠加而成,为了便于图像特征识别,我们通常会将一张彩色图片转成灰度图片来进行分析,当我们转成灰色图片之后,图片中边缘,轮廓特征仍然是能够清晰看到的,况且在这种情况下我们仅需要对单一通道进行分析,会简化很多操作!</p>
<p><img alt="" src="../../img/texiao01.jpg" /></p>
<p>示例代码</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">cv2</span> <span class="k">as</span> <span class="nn">cv</span>

<span class="c1"># 方式一 ： 直接以灰度图像的形式读取</span>
<span class="c1"># img = cv.imread(&quot;img/itheima.jpg&quot;, cv.IMREAD_GRAYSCALE)</span>
<span class="c1"># cv.imshow(&quot;dstImg&quot;,img)</span>
<span class="c1"># cv.waitKey(0)</span>

<span class="c1"># 方式二： 以彩图的方式读取</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&quot;img/itheima.jpg&quot;</span><span class="p">,</span><span class="n">cv</span><span class="o">.</span><span class="n">IMREAD_COLOR</span><span class="p">)</span>
<span class="c1"># 将原图的所有颜色转成灰色</span>
<span class="n">dstImg</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&quot;dstImg&quot;</span><span class="p">,</span><span class="n">dstImg</span><span class="p">)</span>

<span class="n">cv</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<h3 id="_4">原理演示<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>方式一: gray = (B+G+R)/3</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="n">img</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&quot;img/itheima.jpg&quot;</span><span class="p">,</span><span class="n">cv</span><span class="o">.</span><span class="n">IMREAD_COLOR</span><span class="p">)</span>

<span class="c1"># 获取图片宽高信息</span>
<span class="n">imgInfo</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span>
<span class="n">height</span> <span class="o">=</span> <span class="n">imgInfo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">width</span> <span class="o">=</span> <span class="n">imgInfo</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># 定义一个与原图同样大小的矩阵</span>
<span class="n">dstImg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">imgInfo</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>

<span class="c1"># 遍历dstImg，填充数据</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
        <span class="c1"># 获取原来的像素值</span>
        <span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">r</span><span class="p">)</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">]</span>
        <span class="c1"># 计算灰度</span>
        <span class="n">gray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">+</span><span class="nb">int</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="o">+</span><span class="nb">int</span><span class="p">(</span><span class="n">r</span><span class="p">))</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">gray</span><span class="p">)</span>
        <span class="c1"># 向目标矩阵中填值</span>
        <span class="n">dstImg</span><span class="p">[</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">]</span><span class="o">=</span><span class="n">gray</span>

<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&quot;dstimg&quot;</span><span class="p">,</span><span class="n">dstImg</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>方式二: 利用著名的彩色转灰色心理学公式:  <code>Gray = R*0.299 + G*0.587 + B*0.114</code></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">cv2</span> <span class="k">as</span> <span class="nn">cv</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># 将图片数据读取进来</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&quot;img/itheima.jpg&quot;</span><span class="p">,</span><span class="n">cv</span><span class="o">.</span><span class="n">IMREAD_COLOR</span><span class="p">)</span>

<span class="c1"># 获取图片宽高信息</span>
<span class="n">imgInfo</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span>
<span class="n">height</span> <span class="o">=</span> <span class="n">imgInfo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">width</span> <span class="o">=</span> <span class="n">imgInfo</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># 定义一个与原图同样大小的矩阵</span>
<span class="n">dstImg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">imgInfo</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>

<span class="c1"># 遍历dstImg，填充数据</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
        <span class="c1"># 获取原来的像素值</span>
        <span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">r</span><span class="p">)</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">]</span>
        <span class="c1"># 计算灰度</span>
        <span class="c1"># gray = np.uint8((int(b)+int(g)+int(r))/3)</span>
        <span class="c1"># 采用心理学公式计算</span>
        <span class="n">gray</span> <span class="o">=</span> <span class="n">b</span><span class="o">*</span><span class="mf">0.114</span> <span class="o">+</span> <span class="n">g</span><span class="o">*</span><span class="mf">0.587</span> <span class="o">+</span> <span class="n">r</span><span class="o">*</span><span class="mf">0.299</span>
        <span class="c1"># 向目标矩阵中填值</span>
        <span class="n">dstImg</span><span class="p">[</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">]</span><span class="o">=</span><span class="n">gray</span>

<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&quot;dstimg&quot;</span><span class="p">,</span><span class="n">dstImg</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<h2 id="_5">颜色反转<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h2>
<h3 id="_6">灰图反转<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>例如在一张灰度图片中,某个像素点的灰度值为100, 然后我们进行颜色反转之后,灰度值变为255-100 = 155 , 从下图我们可以看出,进行颜色反转之后,整张图片看起来非常像我们小时候所看到的胶卷底片! </p>
<p><img alt="" src="../../img/tx02.jpg" /></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">cv2</span> <span class="k">as</span> <span class="nn">cv</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># 将图片数据读取进来</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&quot;img/itheima.jpg&quot;</span><span class="p">,</span><span class="n">cv</span><span class="o">.</span><span class="n">IMREAD_GRAYSCALE</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">,</span><span class="n">img</span><span class="p">)</span>
<span class="c1"># 获取原图信息</span>
<span class="n">imgInfo</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span>
<span class="n">height</span> <span class="o">=</span> <span class="n">imgInfo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">width</span> <span class="o">=</span> <span class="n">imgInfo</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># 创建一个和原图同样大小的矩阵</span>
<span class="n">dstImg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">height</span><span class="p">,</span><span class="n">width</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
        <span class="c1"># 获取原图中的灰度值</span>
        <span class="n">gray</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">]</span>
        <span class="c1"># 反转</span>
        <span class="n">newColor</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">-</span> <span class="n">gray</span>
        <span class="c1"># 填充</span>
        <span class="n">dstImg</span><span class="p">[</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">]</span><span class="o">=</span><span class="n">newColor</span>

<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&quot;dstimg&quot;</span><span class="p">,</span><span class="n">dstImg</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<h3 id="_7">彩图反转<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>学会了前面灰度图片的反转,下面我们进一步来学习彩色图片的反转. 相对于灰度图片,彩色图片其实只是由3个灰度图片叠加而成,如果让彩色图片进行颜色反转,我们其实只需要让每个通道的灰度值进行反转即可!</p>
<p><img alt="" src="../../img/tx03.jpg" /></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">cv2</span> <span class="k">as</span> <span class="nn">cv</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># 将图片数据读取进来</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&quot;img/itheima.jpg&quot;</span><span class="p">,</span><span class="n">cv</span><span class="o">.</span><span class="n">IMREAD_COLOR</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">,</span><span class="n">img</span><span class="p">)</span>
<span class="c1"># 获取原图信息</span>
<span class="n">imgInfo</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span>
<span class="n">height</span> <span class="o">=</span> <span class="n">imgInfo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">width</span> <span class="o">=</span> <span class="n">imgInfo</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># 创建一个和原图同样大小的矩阵</span>
<span class="n">dstImg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">height</span><span class="p">,</span><span class="n">width</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>

<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
        <span class="c1"># 获取原图中的灰度值</span>
        <span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">r</span><span class="p">)</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">]</span>
        <span class="c1"># 反转</span>
        <span class="n">new_b</span> <span class="o">=</span> <span class="mi">255</span><span class="o">-</span><span class="n">b</span>
        <span class="n">new_g</span> <span class="o">=</span> <span class="mi">255</span><span class="o">-</span><span class="n">g</span>
        <span class="n">new_r</span> <span class="o">=</span> <span class="mi">255</span><span class="o">-</span><span class="n">r</span>
        <span class="c1"># 填充</span>
        <span class="n">dstImg</span><span class="p">[</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="n">new_b</span><span class="p">,</span><span class="n">new_g</span><span class="p">,</span><span class="n">new_r</span><span class="p">)</span>


<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&quot;dstimg&quot;</span><span class="p">,</span><span class="n">dstImg</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<h2 id="_8">马赛克效果<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h2>
<p>马赛克指现行广为使用的一种图像（视频）处理手段，此手段将影像特定区域的色阶细节劣化并造成色块打乱的效果，因为这种模糊看上去有一个个的小格子组成，便形象的称这种画面为马赛克。其目的通常是使之无法辨认。</p>
<p>下面,我们来介绍一下实现马赛克的思路!</p>
<p>假设我们将要打马赛克的区域按照4x4进行划分,我们就会得到如下左图的样子! </p>
<p>接下来我们要干的就是让这个4x4块内的所有像素点的颜色值都和第一个像素点的值一样.</p>
<p>经过运算之后,我们整个4x4块内的所有像素点就都成了黄色! 从而掩盖掉了原来的像素内容!</p>
<p><img alt="" src="../../img/tx05.jpg" /></p>
<p><img alt="" src="../../img/tx04.jpg" /></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">cv2</span> <span class="k">as</span> <span class="nn">cv</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># 将图片数据读取进来</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&quot;img/itheima.jpg&quot;</span><span class="p">,</span><span class="n">cv</span><span class="o">.</span><span class="n">IMREAD_COLOR</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">,</span><span class="n">img</span><span class="p">)</span>
<span class="c1"># 获取原图信息</span>
<span class="n">imgInfo</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span>
<span class="n">height</span> <span class="o">=</span> <span class="n">imgInfo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">width</span> <span class="o">=</span> <span class="n">imgInfo</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># 遍历要打马赛克的区域 宽度430 高度220</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">160</span><span class="p">,</span><span class="mi">240</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">380</span><span class="p">,</span><span class="mi">670</span><span class="p">):</span>
        <span class="c1"># 每10×10的区域将像素点颜色改成一致</span>
        <span class="k">if</span> <span class="n">row</span><span class="o">%</span><span class="mi">10</span><span class="o">==</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">col</span><span class="o">%</span><span class="mi">10</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="c1"># 获取当前颜色值</span>
            <span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">r</span><span class="p">)</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">]</span>
            <span class="c1"># 将10×10区域内的颜色值改成一致</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
                    <span class="n">img</span><span class="p">[</span><span class="n">row</span><span class="o">+</span><span class="n">i</span><span class="p">,</span><span class="n">col</span><span class="o">+</span><span class="n">j</span><span class="p">]</span><span class="o">=</span> <span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">r</span><span class="p">)</span>

<span class="c1"># 显示效果图</span>
<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;dstimg&#39;</span><span class="p">,</span><span class="n">img</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<h2 id="_9">毛玻璃效果<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h2>
<p>毛玻璃的效果和我们前面讲过的马赛克效果其实是非常相似的, 只不过毛玻璃效果是从附近的颜色块中,随机的去选择一个颜色值作为当前像素点的值! </p>
<p>我们还是以4x4的块大小为例,当我们去遍历每个像素点的时候, 当前像素点的颜色值,我们随机从它附近4x4的区域内选择一个颜色值作为当前像素点的值!</p>
<p><img alt="" src="../../img/tx07.jpg" /></p>
<p><img alt="" src="../../img/tx06.jpg" /></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">cv2</span> <span class="k">as</span> <span class="nn">cv</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="c1"># 将图片数据读取进来</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&quot;img/itheima.jpg&quot;</span><span class="p">,</span><span class="n">cv</span><span class="o">.</span><span class="n">IMREAD_COLOR</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">,</span><span class="n">img</span><span class="p">)</span>
<span class="c1"># 获取原图信息</span>
<span class="n">imgInfo</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span>
<span class="n">height</span> <span class="o">=</span> <span class="n">imgInfo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">width</span> <span class="o">=</span> <span class="n">imgInfo</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># 创建一个和原图同样大小的空白矩阵</span>
<span class="n">dstImg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">height</span><span class="p">,</span><span class="n">width</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>

<span class="c1"># 定义偏移量,表示从后面6个像素中随机选取一个颜色值</span>
<span class="n">offset</span><span class="o">=</span><span class="mi">6</span>

<span class="c1"># 向空白矩阵中填入颜色值</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
        <span class="c1"># 计算随机数</span>
        <span class="n">index</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span><span class="o">*</span><span class="n">offset</span><span class="p">)</span>
        <span class="c1"># 计算随机行号</span>
        <span class="n">randomRow</span> <span class="o">=</span> <span class="n">row</span> <span class="o">+</span> <span class="n">index</span> <span class="k">if</span> <span class="n">row</span><span class="o">+</span><span class="n">index</span><span class="o">&lt;</span><span class="n">height</span> <span class="k">else</span> <span class="n">height</span><span class="o">-</span><span class="mi">1</span>
        <span class="c1"># 计算随机列号</span>
        <span class="n">randomCol</span> <span class="o">=</span> <span class="n">col</span> <span class="o">+</span> <span class="n">index</span> <span class="k">if</span> <span class="n">col</span><span class="o">+</span><span class="n">index</span><span class="o">&lt;</span><span class="n">width</span> <span class="k">else</span> <span class="n">width</span><span class="o">-</span><span class="mi">1</span>
        <span class="c1"># 选择附近的一个像素点颜色</span>
        <span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">r</span><span class="p">)</span> <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="n">randomRow</span><span class="p">,</span><span class="n">randomCol</span><span class="p">]</span>
        <span class="c1"># 填充到空白矩阵中</span>
        <span class="n">dstImg</span><span class="p">[</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">r</span><span class="p">)</span>

<span class="c1"># 显示效果图</span>
<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;dstimg&#39;</span><span class="p">,</span><span class="n">dstImg</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<h2 id="_10">图片浮雕效果<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h2>
<h3 id="_11">梯度<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p>前面我们做过一个毛玻璃效果的图片, 其实原理很简单对吧,我们只需要让当前像素点的颜色和附近像素点的颜色一致就可以了! 这样带来的效果其实是图片变得模糊.</p>
<p>那么模糊图片和清晰图片之间的差异是什么呢? 从视觉角度来讲, 图像模糊是因为图像中物体的边缘轮廓不明显,就好比一个近视的同学,摘下眼镜看东西,整个世界的轮廓都是模糊的. 再进一步理解就是物体边缘灰度变化不强烈,层次感不强造成的! 那么反过来, 如果物体轮廓边缘灰度变化明显些, 层次感强些图像不就是清晰一些了吗?</p>
<p>这种灰度变化明不明显强不强烈该如何定义呢 ? 我们学过微积分, 微分就是求函数的变化率,即导数(梯度). 其实梯度我们可以把它理解为颜色变化的强度, 更直白一点说<strong>梯度</strong>相当于是2个相邻像素之间的差值!</p>
<p><img alt="" src="../../img2/g01.png" /></p>
<p>我们先看第一行数据, 在X轴方向上,颜色值都为100,我们并没有看到任何的边缘</p>
<p>但是在Y轴方向上, 我们可以看到100和50之间有明显的边缘,其实这个就是梯度</p>
<p>浮雕效果相信大家都有比较熟悉,在opencv中我们想要实现浮雕效果,只需套用如下公式即可:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="n">gray</span> <span class="o">=</span> <span class="n">gray0</span><span class="o">-</span><span class="n">gray1</span><span class="o">+</span><span class="mi">120</span>
</code></pre></div>
</td></tr></table>

<p>其中,相邻像素值之差可以体现边缘的突变或者称为梯度</p>
<p>末尾加上120只是为了增加像素值的灰度. </p>
<p>当然,在这个运算的过程中,我们还需要注意计算结果有可能小于0或者大于255</p>
<p><img alt="" src="../../img/tx09.jpg" /></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">cv2</span> <span class="k">as</span> <span class="nn">cv</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">random</span>


<span class="c1"># 将图片数据读取进来</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&quot;img/itheima.jpg&quot;</span><span class="p">,</span><span class="n">cv</span><span class="o">.</span><span class="n">IMREAD_COLOR</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">,</span><span class="n">img</span><span class="p">)</span>

<span class="n">imgInfo</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span>
<span class="n">height</span> <span class="o">=</span> <span class="n">imgInfo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">width</span> <span class="o">=</span> <span class="n">imgInfo</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># 将图片转成灰度图片</span>
<span class="n">grayImg</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv</span><span class="o">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>

<span class="c1"># 创建一张与原图相同大小的空白矩阵</span>
<span class="n">dstImg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">height</span><span class="p">,</span><span class="n">width</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>

<span class="c1"># 向空白图片中填充内容</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="c1"># 获取当前像素值</span>
        <span class="n">gray0</span> <span class="o">=</span> <span class="n">grayImg</span><span class="p">[</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">]</span>
        <span class="c1"># 获取相邻一个像素点灰度</span>
        <span class="n">gray1</span> <span class="o">=</span> <span class="n">grayImg</span><span class="p">[</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1"># 计算新的灰度值</span>
        <span class="n">gray</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">gray0</span><span class="p">)</span><span class="o">-</span><span class="nb">int</span><span class="p">(</span><span class="n">gray1</span><span class="p">)</span><span class="o">+</span><span class="mi">120</span>
        <span class="c1"># 校验gray是否越界</span>
        <span class="n">gray</span> <span class="o">=</span> <span class="n">gray</span> <span class="k">if</span> <span class="n">gray</span><span class="o">&lt;</span><span class="mi">255</span> <span class="k">else</span> <span class="mi">255</span>
        <span class="n">gray</span> <span class="o">=</span> <span class="n">gray</span> <span class="k">if</span> <span class="n">gray</span><span class="o">&gt;</span><span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="c1"># 将值填充到空白的矩阵中</span>
        <span class="n">dstImg</span><span class="p">[</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">gray</span>

<span class="c1"># 显示图片</span>
<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&quot;dstimg&quot;</span><span class="p">,</span><span class="n">dstImg</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<h2 id="_12">绘制图形<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h2>
<p>在这之前,我们学过的所有操作,其实都是在原图的基础上进行修改! 现在假设我们想在原图上绘制一些标记或者轮廓,那么我们就需要来学习一下opencv给我们提供的相应API,在这些API中,常见的有绘制直线,绘制圆,绘制矩形</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="c1"># 绘制线段 参数2：起始点 参数3：结束点 参数4：颜色 参数5：线条宽度</span>
<span class="n">cv</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">图片矩阵</span><span class="p">,</span><span class="n">起始点</span><span class="p">,</span><span class="n">结束点</span><span class="p">,</span><span class="n">颜色值</span><span class="p">,</span><span class="n">线条的宽度</span><span class="p">,</span><span class="n">线条的类型</span><span class="p">)</span>
<span class="c1"># 绘制一个矩形 参数2： 左上角  参数3：右下角 参数4：颜色  参数5：线条宽度，若为负数，则填充整个矩形</span>
<span class="n">cv</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">dstImg</span><span class="p">,(</span><span class="mi">250</span><span class="p">,</span><span class="mi">90</span><span class="p">),(</span><span class="mi">470</span><span class="p">,</span><span class="mi">180</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># 绘制圆形 参数2：圆心  参数3：半径  参数4：颜色 参数5：线条宽度</span>
<span class="n">cv</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">dstImg</span><span class="p">,(</span><span class="mi">450</span><span class="p">,</span><span class="mi">280</span><span class="p">),</span><span class="mi">90</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p><img alt="" src="../../img/tx10.jpg" /></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">cv2</span> <span class="k">as</span> <span class="nn">cv</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="c1"># 创建一个空白的矩阵</span>
<span class="n">dstImg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">400</span><span class="p">,</span><span class="mi">600</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>

<span class="c1"># 绘制线段 参数2：起始点 参数3：结束点 参数4：颜色 参数5：线条宽度</span>
<span class="n">cv</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">dstImg</span><span class="p">,(</span><span class="mi">50</span><span class="p">,</span><span class="mi">10</span><span class="p">),(</span><span class="mi">400</span><span class="p">,</span><span class="mi">10</span><span class="p">),(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="mi">10</span><span class="p">)</span>
<span class="c1"># 扛锯齿</span>
<span class="n">cv</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">dstImg</span><span class="p">,(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">),(</span><span class="mi">400</span><span class="p">,</span><span class="mi">50</span><span class="p">),(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="mi">10</span><span class="p">,</span><span class="n">cv</span><span class="o">.</span><span class="n">LINE_AA</span><span class="p">)</span>

<span class="c1"># 绘制一个三角形</span>
<span class="n">cv</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">dstImg</span><span class="p">,(</span><span class="mi">50</span><span class="p">,</span><span class="mi">350</span><span class="p">),(</span><span class="mi">150</span><span class="p">,</span><span class="mi">200</span><span class="p">),(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="mi">10</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">dstImg</span><span class="p">,(</span><span class="mi">150</span><span class="p">,</span><span class="mi">200</span><span class="p">),(</span><span class="mi">300</span><span class="p">,</span><span class="mi">350</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="mi">10</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">dstImg</span><span class="p">,(</span><span class="mi">300</span><span class="p">,</span><span class="mi">350</span><span class="p">),(</span><span class="mi">50</span><span class="p">,</span><span class="mi">350</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># 绘制一个矩形 参数2： 左上角  参数3：右下角 参数4：颜色  参数5：线条宽度，若为负数，则填充整个矩形</span>
<span class="n">cv</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">dstImg</span><span class="p">,(</span><span class="mi">250</span><span class="p">,</span><span class="mi">90</span><span class="p">),(</span><span class="mi">470</span><span class="p">,</span><span class="mi">180</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># 绘制圆形 参数2：圆心  参数3：半径  参数4：颜色 参数5：线条宽度</span>
<span class="n">cv</span><span class="o">.</span><span class="n">circle</span><span class="p">(</span><span class="n">dstImg</span><span class="p">,(</span><span class="mi">450</span><span class="p">,</span><span class="mi">280</span><span class="p">),</span><span class="mi">90</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># 显示图片</span>
<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&quot;dstimg&quot;</span><span class="p">,</span><span class="n">dstImg</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<h2 id="_13">文字图片绘制<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h2>
<p>在图片上绘制文本,我们需要用到</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="c1"># 绘制文字</span>
<span class="n">font</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">FONT_HERSHEY_SIMPLEX</span>
<span class="c1"># 参数2：文本 参数3：显示位置  参数4：字体 参数5：大小 参数6：颜色 参数7：粗细 参数8：线条类型</span>
<span class="n">cv</span><span class="o">.</span><span class="n">putText</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="s1">&#39;www.itheima.com&#39;</span><span class="p">,(</span><span class="mi">395</span><span class="p">,</span><span class="mi">138</span><span class="p">),</span><span class="n">font</span><span class="p">,</span><span class="mi">1</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span><span class="mi">2</span><span class="p">,</span><span class="n">cv</span><span class="o">.</span><span class="n">LINE_AA</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p><img alt="" src="../../img/tx11.jpg" /></p>
<p>示例代码</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="c1"># 将图片数据读取进来</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&quot;img/itheima.jpg&quot;</span><span class="p">,</span><span class="n">cv</span><span class="o">.</span><span class="n">IMREAD_COLOR</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">,</span><span class="n">img</span><span class="p">)</span>
<span class="n">imgInfo</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span>
<span class="n">height</span> <span class="o">=</span> <span class="n">imgInfo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">width</span> <span class="o">=</span> <span class="n">imgInfo</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

<span class="c1"># 在图片上绘制矩形</span>
<span class="n">cv</span><span class="o">.</span><span class="n">rectangle</span><span class="p">(</span><span class="n">img</span><span class="p">,(</span><span class="mi">380</span><span class="p">,</span><span class="mi">150</span><span class="p">),(</span><span class="mi">666</span><span class="p">,</span><span class="mi">236</span><span class="p">),(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># 绘制图片</span>
<span class="n">lenaImg</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&quot;img/lena.jpg&quot;</span><span class="p">,</span><span class="n">cv</span><span class="o">.</span><span class="n">IMREAD_COLOR</span><span class="p">)</span>
<span class="c1"># 获取图片信息</span>
<span class="n">imgInfo</span> <span class="o">=</span> <span class="n">lenaImg</span><span class="o">.</span><span class="n">shape</span>
<span class="c1"># 计算缩放图片宽高</span>
<span class="n">scale</span> <span class="o">=</span> <span class="mf">0.3</span>
<span class="n">height</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">imgInfo</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">scale</span><span class="p">)</span>
<span class="n">width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">imgInfo</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">scale</span><span class="p">)</span>
<span class="c1"># 缩放图片</span>
<span class="n">newLenaImg</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">lenaImg</span><span class="p">,(</span><span class="n">height</span><span class="p">,</span><span class="n">width</span><span class="p">))</span>
<span class="c1"># 遍历</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
        <span class="n">img</span><span class="p">[</span><span class="mi">50</span><span class="o">+</span><span class="n">row</span><span class="p">,</span><span class="mi">100</span><span class="o">+</span><span class="n">col</span><span class="p">]</span><span class="o">=</span><span class="n">newLenaImg</span><span class="p">[</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">]</span>

<span class="n">cv</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s1">&#39;dstimg&#39;</span><span class="p">,</span><span class="n">img</span><span class="p">)</span>
<span class="n">cv</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>
</td></tr></table>

<p>注意: opencv不支持中文显示,若想显示中文,需要额外安装中文字体库</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../04_jihebianhuan/" title="图片的几何变换" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  上一页
                </span>
                图片的几何变换
              </span>
            </div>
          </a>
        
        
          <a href="../06_meihua/" title="图片美化" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  下一页
                </span>
                图片美化
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            <a href="https://www.czxy.com/">传智专修学院</a> 版权所有 2006 - 2020 江苏传智播客教育科技股份有限公司  学校地址：江苏省宿迁市沭阳县北京南路6号  邮编：223600   <a href="http://www.beian.miit.gov.cn/">苏ICP备16007882号-4</a>
          </div>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.c33a9706.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
            
          
          
        
      
      <script>app.initialize({version:"1.1",url:{base:"../.."}})</script>
      
        <script src="../../js/extra.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
        <script src="../../js/baidu-tongji.js"></script>
      
    
  </body>
</html>