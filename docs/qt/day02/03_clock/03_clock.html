



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="传智专修学院 人工智能和机器人实验室 Qt编程">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="jp">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>三、黑马时钟 - 黑马机器人—Qt编程</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.adb8469c.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#_1" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="黑马机器人—Qt编程" aria-label="黑马机器人—Qt编程" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              黑马机器人—Qt编程
            </span>
            <span class="md-header-nav__topic">
              
                三、黑马时钟
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="黑马机器人—Qt编程" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    黑马机器人—Qt编程
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      day01-Qt基础
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        day01-Qt基础
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../day01/01_intro/" title="一、Qt简介" class="md-nav__link">
      一、Qt简介
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../day01/02_env/" title="二、Qt环境搭建" class="md-nav__link">
      二、Qt环境搭建
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../day01/03_window/" title="三、Qt窗口" class="md-nav__link">
      三、Qt窗口
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../day01/04_object_tree/" title="四、Qt对象树模型" class="md-nav__link">
      四、Qt对象树模型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../day01/05_signal_slot/" title="五、信号和槽" class="md-nav__link">
      五、信号和槽
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../day01/06_resources/" title="六、资源文件" class="md-nav__link">
      六、资源文件
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      day02-Qt高级
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        day02-Qt高级
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../01_widget_layout/" title="一、控件和布局" class="md-nav__link">
      一、控件和布局
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../02_event_paint/" title="二、事件机制和绘制" class="md-nav__link">
      二、事件机制和绘制
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        三、黑马时钟
      </label>
    
    <a href="./" title="三、黑马时钟" class="md-nav__link md-nav__link--active">
      三、黑马时钟
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    黑马时钟
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../04_socket/" title="四、Socket通信" class="md-nav__link">
      四、Socket通信
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../05_chat/" title="五、Qt综合项目-局域网聊天室" class="md-nav__link">
      五、Qt综合项目-局域网聊天室
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    黑马时钟
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="_1">三、黑马时钟<a class="headerlink" href="#_1" title="Permanent link">#</a></h1>
<h2 id="_2">黑马时钟<a class="headerlink" href="#_2" title="Permanent link">#</a></h2>
<p><img alt="" src="../img/6.png" /></p>
<blockquote>
<p>时钟是由多个绘制单元组成：</p>
<p>刻度:绘制直线</p>
<p>文字：绘制文字</p>
<p>时针：绘制多边形</p>
<p>分针：绘制多边形</p>
<p>秒针：绘制多边形</p>
</blockquote>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&quot;MainWindow.h&quot;</span><span class="cp"></span>

<span class="c1">//时针的点</span>
<span class="k">const</span> <span class="n">QPoint</span> <span class="n">MainWindow</span><span class="o">::</span><span class="n">hourHand</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">QPoint</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
        <span class="n">QPoint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span>
        <span class="n">QPoint</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
        <span class="n">QPoint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">40</span><span class="p">)</span>
<span class="p">};</span>
<span class="c1">//分针的点</span>
<span class="k">const</span> <span class="n">QPoint</span> <span class="n">MainWindow</span><span class="o">::</span><span class="n">minuteHand</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">QPoint</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
        <span class="n">QPoint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span>
        <span class="n">QPoint</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
        <span class="n">QPoint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">70</span><span class="p">)</span>
<span class="p">};</span>
<span class="c1">//秒针的点</span>
<span class="k">const</span> <span class="n">QPoint</span> <span class="n">MainWindow</span><span class="o">::</span><span class="n">secondHand</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">QPoint</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
        <span class="n">QPoint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">18</span><span class="p">),</span>
        <span class="n">QPoint</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
        <span class="n">QPoint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">)</span>
<span class="p">};</span>


<span class="n">MainWindow</span><span class="o">::</span><span class="n">MainWindow</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span><span class="p">)</span> <span class="o">:</span> <span class="n">QWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">),</span><span class="n">t</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//设置窗口大小</span>
    <span class="n">setFixedSize</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">600</span><span class="p">);</span>
    <span class="c1">//定时</span>
    <span class="n">connect</span><span class="p">(</span><span class="o">&amp;</span><span class="n">t</span><span class="p">,</span><span class="o">&amp;</span><span class="n">QTimer</span><span class="o">::</span><span class="n">timeout</span><span class="p">,[</span><span class="k">this</span><span class="p">](){</span>
        <span class="c1">//再次执行paintEvent方法</span>
        <span class="n">update</span><span class="p">();</span><span class="c1">//自动执行paintEvent方法</span>
    <span class="p">});</span>
    <span class="c1">//开始定时</span>
    <span class="n">t</span><span class="p">.</span><span class="n">start</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">MainWindow</span><span class="o">::~</span><span class="n">MainWindow</span><span class="p">()</span> <span class="p">{</span>

<span class="p">}</span>

<span class="c1">//绘制方法</span>
<span class="kt">void</span> <span class="n">MainWindow</span><span class="o">::</span><span class="n">paintEvent</span><span class="p">(</span><span class="n">QPaintEvent</span> <span class="o">*</span><span class="n">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//创建Qpainter</span>
    <span class="n">QPainter</span> <span class="n">painter</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="c1">//抗锯齿</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">setRenderHint</span><span class="p">(</span><span class="n">QPainter</span><span class="o">::</span><span class="n">Antialiasing</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
    <span class="c1">//设置画家对象的圆形在300,300</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">translate</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="mi">300</span><span class="p">);</span>
    <span class="c1">//绘制刻度</span>
    <span class="n">drawScale</span><span class="p">(</span><span class="n">painter</span><span class="p">);</span>
    <span class="c1">//绘制秒针</span>
    <span class="n">drawSecond</span><span class="p">(</span><span class="n">painter</span><span class="p">);</span>
    <span class="c1">//绘制分针</span>
    <span class="n">drawMin</span><span class="p">(</span><span class="n">painter</span><span class="p">);</span>
    <span class="c1">//绘制时针</span>
    <span class="n">drawHour</span><span class="p">(</span><span class="n">painter</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">//绘制表盘</span>
<span class="kt">void</span> <span class="n">MainWindow</span><span class="o">::</span><span class="n">drawScale</span><span class="p">(</span><span class="n">QPainter</span> <span class="o">&amp;</span><span class="n">painter</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">60</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//保存当前的状态</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">save</span><span class="p">();</span>
        <span class="c1">//旋转</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">6</span> <span class="o">*</span> <span class="n">i</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">painter</span><span class="p">.</span><span class="n">drawLine</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">98</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">82</span><span class="p">);</span>
            <span class="c1">//绘制文字</span>
            <span class="n">painter</span><span class="p">.</span><span class="n">drawText</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span><span class="o">-</span><span class="mi">80</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="n">Qt</span><span class="o">::</span><span class="n">AlignHCenter</span><span class="p">,</span><span class="n">QString</span><span class="o">::</span><span class="n">number</span><span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="mi">5</span><span class="p">));</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">painter</span><span class="p">.</span><span class="n">drawLine</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">98</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">88</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">//恢复原来的状态</span>
        <span class="n">painter</span><span class="p">.</span><span class="n">restore</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>


<span class="c1">//时针</span>
<span class="kt">void</span> <span class="n">MainWindow</span><span class="o">::</span><span class="n">drawHour</span><span class="p">(</span><span class="n">QPainter</span> <span class="o">&amp;</span><span class="n">painter</span><span class="p">){</span>
    <span class="c1">//获取当前的时间</span>
    <span class="kt">int</span> <span class="n">hour</span> <span class="o">=</span> <span class="n">QTime</span><span class="p">().</span><span class="n">currentTime</span><span class="p">().</span><span class="n">hour</span><span class="p">();</span>
    <span class="kt">int</span> <span class="n">min</span> <span class="o">=</span> <span class="n">QTime</span><span class="p">().</span><span class="n">currentTime</span><span class="p">().</span><span class="n">minute</span><span class="p">();</span>
    <span class="c1">//保存状态</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">save</span><span class="p">();</span>
    <span class="c1">//旋转</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">30</span><span class="o">*</span><span class="n">hour</span><span class="o">+</span><span class="mi">30</span><span class="o">*</span><span class="p">(</span><span class="n">min</span><span class="o">/</span><span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="mi">60</span><span class="p">));</span>
    <span class="c1">//创建画刷</span>
    <span class="n">QBrush</span> <span class="nf">brush</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">black</span><span class="p">);</span>
    <span class="c1">//设置画刷</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">brush</span><span class="p">);</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">drawConvexPolygon</span><span class="p">(</span><span class="n">hourHand</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>
    <span class="c1">//恢复</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">restore</span><span class="p">();</span>
<span class="p">}</span>
<span class="c1">//分针</span>
<span class="kt">void</span> <span class="n">MainWindow</span><span class="o">::</span><span class="n">drawMin</span><span class="p">(</span><span class="n">QPainter</span> <span class="o">&amp;</span><span class="n">painter</span><span class="p">){</span>
    <span class="c1">//获取当前的时间</span>
    <span class="kt">int</span> <span class="n">second</span> <span class="o">=</span> <span class="n">QTime</span><span class="p">().</span><span class="n">currentTime</span><span class="p">().</span><span class="n">minute</span><span class="p">();</span>
    <span class="c1">//保存状态</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">save</span><span class="p">();</span>
    <span class="c1">//旋转</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">6</span><span class="o">*</span><span class="n">second</span><span class="p">);</span>
    <span class="c1">//创建画刷</span>
    <span class="n">QBrush</span> <span class="nf">brush</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">blue</span><span class="p">);</span>
    <span class="c1">//设置画刷</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">brush</span><span class="p">);</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">drawConvexPolygon</span><span class="p">(</span><span class="n">minuteHand</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>
    <span class="c1">//恢复</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">restore</span><span class="p">();</span>
<span class="p">}</span>
<span class="c1">//秒针</span>
<span class="kt">void</span> <span class="n">MainWindow</span><span class="o">::</span><span class="n">drawSecond</span><span class="p">(</span><span class="n">QPainter</span> <span class="o">&amp;</span><span class="n">painter</span><span class="p">){</span>
    <span class="c1">//获取当前的时间</span>
    <span class="kt">int</span> <span class="n">second</span> <span class="o">=</span> <span class="n">QTime</span><span class="p">().</span><span class="n">currentTime</span><span class="p">().</span><span class="n">second</span><span class="p">();</span>
    <span class="c1">//保存状态</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">save</span><span class="p">();</span>
    <span class="c1">//旋转</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">6</span><span class="o">*</span><span class="n">second</span><span class="p">);</span>
    <span class="c1">//创建画刷</span>
    <span class="n">QBrush</span> <span class="nf">brush</span><span class="p">(</span><span class="n">Qt</span><span class="o">::</span><span class="n">red</span><span class="p">);</span>
    <span class="c1">//设置画刷</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">setBrush</span><span class="p">(</span><span class="n">brush</span><span class="p">);</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">drawConvexPolygon</span><span class="p">(</span><span class="n">secondHand</span><span class="p">,</span><span class="mi">4</span><span class="p">);</span>

    <span class="c1">//恢复</span>
    <span class="n">painter</span><span class="p">.</span><span class="n">restore</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../02_event_paint/" title="二、事件机制和绘制" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                二、事件机制和绘制
              </span>
            </div>
          </a>
        
        
          <a href="../04_socket/" title="四、Socket通信" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                四、Socket通信
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            <a href="https://www.czxy.com/">传智专修学院</a> 版权所有 2006 - 2020 江苏传智播客教育科技股份有限公司  学校地址：江苏省宿迁市沭阳县北京南路6号  邮编：223600   <a href="http://www.beian.miit.gov.cn/">苏ICP备16007882号-4</a>
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.c33a9706.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              
            
          
          
        
      
      <script>app.initialize({version:"1.1",url:{base:"../.."}})</script>
      
        <script src="../../js/extra.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
        <script src="../../js/baidu-tongji.js"></script>
      
    
  </body>
</html>